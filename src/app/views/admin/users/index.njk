{% extends "../layout.njk" %}

{% block content %}
<section class="user container form">
    <div class="headerUsers">
        <h3>Bem vindo, {{user.name}}</h3>
    </div>
    <form action="/admin/profile?_method=PUT" class="usersForm" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="id" value="{{user.id}}">
        <button type="submit">Salvar</button>

        <div class="dataUser">
            <div class="fields">
                <div class="item">
                    <p>Nome</p>
                    <div class="input">
                        <input type="text" 
                        name="name" 
                        placeholder="Digite seu nome" 
                        value="{{user.name}}"
                    >
                    </div>
                </div>
            </div>

            <div class="fields">
                <div class="item">
                    <p>Email</p>
                    <div class="input">
                        <input type="email" 
                        name="email" 
                        placeholder="Digite seu email" 
                        value="{{user.email}}"
                        onblur="Validate.apply(this, 'isEmail')"
                    >
                    </div>
                </div>
            </div>
        </div>

        <div class="fields">
            <div class="item">
                <p>Senha</p>
                <div class="input password">
                    <input type="password" 
                    name="password" 
                    placeholder="Digite a senha" 
                >
                </div>
            </div>
        </div>

        <div>
            <p>Avatar</p>
            <div id="container-img">
                <div id="add-img-avatar">
                    <input 
                        id="avatar_img" 
                        type="file" 
                        name="image"  
                        accept="image/*" 
                        onchange="ImgChefUpload.handleFileInput(event)"
                    >
                    <p>Foto do Avatar</p>
                </div>
                <div id="img-avatar-preview">
                    {% if avatar %}
                        <div class="avatar_img" id={{avatar.id}}>
                            <img src="{{avatar.src}}" alt="{{avatar.name}}">
                            <span class="material-icons" onclick="ImgChefUpload.removeOldPhoto(event)">close</span>
                        </div>
                        <input type="hidden" name="removed_files">
                    {% endif %}
                </div>
            </div>
        </div>
    </form>
</section>



{% endblock content %}

